{% extends "base.html" %}

{% block title %}{{ dziecko.imie }} — Szczegóły{% endblock %}

{% block content %}
<h2>{{ dziecko.imie }} — Szczegóły noworodka</h2>

<div style="margin-bottom: 20px;">
  <a href="{% url 'historia_zmian' dziecko.id %}" class="btn-custom">Historia zmian</a>
  <a href="{% url 'raporty' %}" class="btn-custom" style="margin-left: 10px;">Powrót do raportów</a>
</div>

<div style="background: #f9f9f9; padding: 15px; border-radius: 5px; margin: 20px 0;">
  <h3>Informacje podstawowe</h3>
  <p style="color: #666; font-size: 0.9em; margin-bottom: 15px;"><em>Dane z bazy danych — nie wprowadzone przez użytkownika</em></p>
  <table style="width: 100%;">
    <tr>
      <td style="padding: 8px; font-weight: bold; width: 150px;">Imię:</td>
      <td style="padding: 8px;">{{ dziecko.imie }}</td>
    </tr>
    <tr>
      <td style="padding: 8px; font-weight: bold;">Data urodzenia:</td>
      <td style="padding: 8px;">{{ dziecko.data_urodzenia }}</td>
    </tr>
    <tr>
      <td style="padding: 8px; font-weight: bold;">Płeć:</td>
      <td style="padding: 8px;">{{ dziecko.get_plec_display }}</td>
    </tr>
    <tr>
      <td style="padding: 8px; font-weight: bold;">PESEL matki:</td>
      <td style="padding: 8px;">{{ dziecko.pesel_matki }}</td>
    </tr>
  </table>
</div>

{% if parametry %}
  <h3>Parametry zewnętrzne</h3>
  <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
    <thead>
      <tr style="background: #34495e; color: white;">
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Data pomiaru</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Waga (kg)</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Wzrost (cm)</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Obwód głowy (cm)</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Oddechy/min</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Nasycenie O2 (%)</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Przedwczesny</th>
      </tr>
    </thead>
    <tbody>
      {% for param in parametry %}
        <tr style="border-bottom: 1px solid #ddd;">
          <td style="padding: 10px; border: 1px solid #ddd;">{{ param.data_pomiaru|date:"Y-m-d H:i" }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ param.waga_kg }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ param.wzrost_cm }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ param.obwod_glowy_cm }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ param.oddechy_na_min }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ param.natlenienie_spO2 }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{% if param.czy_wczesniak %}Tak{% else %}Nie{% endif %}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p><em>Brak zarejestrowanych pomiarów.</em></p>
{% endif %}

{% if apgar_scores %}
  <h3>Wyniki APGAR</h3>
  <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
    <thead>
      <tr style="background: #34495e; color: white;">
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Data pomiaru</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">1 minuta</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">5 minut</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">10 minut</th>
      </tr>
    </thead>
    <tbody>
      {% for apgar in apgar_scores %}
        <tr style="border-bottom: 1px solid #ddd;">
          <td style="padding: 10px; border: 1px solid #ddd;">{{ apgar.data_pomiaru|date:"Y-m-d H:i" }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ apgar.apgar_1min }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ apgar.apgar_5min }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ apgar.apgar_10min|default:"—" }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p><em>Brak zarejestrowanych wyników APGAR.</em></p>
{% endif %}

<div style="margin-top: 30px;">
  <a href="/raporty/" class="btn">Powrót do raportów</a>
  <a href="/dodaj_noworodka/" class="btn" style="background: #27ae60;">Dodaj nowego noworodka</a>
</div>
{% endblock %}
