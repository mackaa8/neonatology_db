{% extends "base.html" %}

{% block title %}Reports{% endblock %}

{% block content %}
<h2>Reports â€” Newborns & Measurements</h2>

{% if dzieci_status %}
  <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
    <thead>
      <tr style="background: #2c3e50; color: white;">
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Name</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Date of Birth</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Added</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Gender</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Mother PESEL</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Measurements</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Status</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Verdict</th>
      </tr>
    </thead>
    <tbody>
      {% for item in dzieci_status %}
        {% with dziecko=item.dziecko status=item.status %}
        <tr style="border-bottom: 1px solid #ddd;">
          <td style="padding: 10px; border: 1px solid #ddd;"><strong><a href="{% url 'szczegoly_noworodka' dziecko.id %}" style="color: #3498db; text-decoration: none;">{{ dziecko.imie }}</a></strong></td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ dziecko.data_urodzenia }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ dziecko.created_at|date:"Y-m-d H:i" }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ dziecko.get_plec_display }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ dziecko.pesel_matki }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">
            <strong>Measurements:</strong> {{ dziecko.parametry.count }}<br>
            <strong>APGAR:</strong> {{ dziecko.apgar.count }}
          </td>
          <td style="padding: 10px; border: 1px solid #ddd;">
            {% if status == 'Hospitalizacja' %}
              <span class="badge badge-hospital" title="Hospitalizacja">Hospitalizacja</span>
            {% elif status == 'Monitorowanie' %}
              <span class="badge badge-monitor" title="Monitorowanie">Monitorowanie</span>
            {% else %}
              <span class="badge badge-ok" title="Parametry w normie">OK</span>
            {% endif %}
          </td>
          <td style="padding: 10px; border: 1px solid #ddd; white-space: pre-line;">{{ item.werdykt }}</td>
        </tr>
        {% endwith %}
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No newborns recorded yet. <a href="/dodaj_noworodka/">Add one now</a>.</p>
{% endif %}

<p style="margin-top: 20px;">
  <a href="/dodaj_noworodka/" class="btn">Add New Newborn</a>
</p>
{% endblock %}
